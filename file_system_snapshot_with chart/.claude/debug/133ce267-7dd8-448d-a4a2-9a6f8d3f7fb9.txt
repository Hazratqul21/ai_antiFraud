[ERROR] Failed to save config with lock: Error: ENOENT: no such file or directory, lstat '/root/.claude.json'
[DEBUG] Writing to temp file: /root/.claude.json.tmp.38.1763644926060
[DEBUG] Setting permissions for new file: 600
[DEBUG] Temp file written successfully, size: 103 bytes
[DEBUG] Renaming /root/.claude.json.tmp.38.1763644926060 to /root/.claude.json
[DEBUG] File /root/.claude.json written atomically
[DEBUG] Writing to temp file: /root/.claude.json.tmp.38.1763644926071
[DEBUG] Preserving file permissions: 100600
[DEBUG] Temp file written successfully, size: 140 bytes
[DEBUG] Applied original permissions to temp file
[DEBUG] Renaming /root/.claude.json.tmp.38.1763644926071 to /root/.claude.json
[DEBUG] File /root/.claude.json written atomically
[DEBUG] Writing to temp file: /root/.claude.json.tmp.38.1763644926104
[DEBUG] Preserving file permissions: 100600
[DEBUG] Temp file written successfully, size: 222 bytes
[DEBUG] Applied original permissions to temp file
[DEBUG] Renaming /root/.claude.json.tmp.38.1763644926104 to /root/.claude.json
[DEBUG] File /root/.claude.json written atomically
[DEBUG] Found 0 plugins (0 enabled, 0 disabled)
[DEBUG] >>>>> getSkillsIfEnabled() CALLED <<<<<
[DEBUG] ENABLE_SKILLS value: false, type: boolean
[DEBUG] ENABLE_SKILLS check failed, returning empty
[DEBUG] Creating shell snapshot for bash (/bin/bash)
[DEBUG] Looking for shell config file: /root/.bashrc
[DEBUG] Snapshots directory: /root/.claude/shell-snapshots
[DEBUG] Creating snapshot at: /root/.claude/shell-snapshots/snapshot-bash-1763644926169-y8382e.sh
[DEBUG] Shell binary exists: true
[DEBUG] Execution timeout: 10000ms
[DEBUG] Writing to temp file: /root/.claude/todos/133ce267-7dd8-448d-a4a2-9a6f8d3f7fb9-agent-133ce267-7dd8-448d-a4a2-9a6f8d3f7fb9.json.tmp.38.1763644926176
[DEBUG] Temp file written successfully, size: 2 bytes
[DEBUG] Renaming /root/.claude/todos/133ce267-7dd8-448d-a4a2-9a6f8d3f7fb9-agent-133ce267-7dd8-448d-a4a2-9a6f8d3f7fb9.json.tmp.38.1763644926176 to /root/.claude/todos/133ce267-7dd8-448d-a4a2-9a6f8d3f7fb9-agent-133ce267-7dd8-448d-a4a2-9a6f8d3f7fb9.json
[DEBUG] File /root/.claude/todos/133ce267-7dd8-448d-a4a2-9a6f8d3f7fb9-agent-133ce267-7dd8-448d-a4a2-9a6f8d3f7fb9.json written atomically
[DEBUG] Total plugin commands loaded: 0
[DEBUG] Registered 0 hooks from 0 plugins
[DEBUG] Total plugin agents loaded: 0
[DEBUG] Getting matching hook commands for SessionStart with query: startup
[DEBUG] Found 0 hook matchers in settings
[DEBUG] Matched 0 unique hooks for query "startup" (0 before deduplication)
[DEBUG] Ripgrep first use test: PASSED (mode=builtin, path=/usr/local/lib/node_modules/@anthropic-ai/claude-code/vendor/ripgrep/x64-linux/rg)
[DEBUG] Shell snapshot created successfully (1721 bytes)
[DEBUG] Writing to temp file: /root/.claude.json.tmp.38.1763644926253
[DEBUG] Preserving file permissions: 100600
[DEBUG] Temp file written successfully, size: 252 bytes
[DEBUG] Applied original permissions to temp file
[DEBUG] Renaming /root/.claude.json.tmp.38.1763644926253 to /root/.claude.json
[DEBUG] File /root/.claude.json written atomically
[DEBUG] Writing to temp file: /root/.claude.json.tmp.38.1763644926257
[DEBUG] Preserving file permissions: 100600
[DEBUG] Temp file written successfully, size: 332 bytes
[DEBUG] Applied original permissions to temp file
[DEBUG] Renaming /root/.claude.json.tmp.38.1763644926257 to /root/.claude.json
[DEBUG] File /root/.claude.json written atomically
[DEBUG] Hooks: getAsyncHookResponseAttachments called
[DEBUG] Hooks: checkForNewResponses called
[DEBUG] Hooks: Found 0 total hooks in registry
[DEBUG] Hooks: checkForNewResponses returning 0 responses
[DEBUG] Getting matching hook commands for UserPromptSubmit with query: undefined
[DEBUG] Found 0 hook matchers in settings
[DEBUG] Matched 0 unique hooks for query "no match query" (0 before deduplication)
[DEBUG] Slash commands included in SlashCommand tool:
[DEBUG] Stream started - received first chunk
[DEBUG] Stream started - received first chunk
[DEBUG] Getting matching hook commands for SubagentStop with query: undefined
[DEBUG] Found 0 hook matchers in settings
[DEBUG] Matched 0 unique hooks for query "no match query" (0 before deduplication)
[DEBUG] executePreToolHooks called for tool: Read
[DEBUG] Getting matching hook commands for PreToolUse with query: Read
[DEBUG] Found 3 hook matchers in settings
[DEBUG] Matched 3 unique hooks for query "Read" (3 before deduplication)
[DEBUG] Getting matching hook commands for PostToolUse with query: Read
[DEBUG] Found 2 hook matchers in settings
[DEBUG] Matched 1 unique hooks for query "Read" (1 before deduplication)
[DEBUG] Hooks: getAsyncHookResponseAttachments called
[DEBUG] Hooks: checkForNewResponses called
[DEBUG] Hooks: Found 0 total hooks in registry
[DEBUG] Hooks: checkForNewResponses returning 0 responses
[DEBUG] Slash commands included in SlashCommand tool:
[DEBUG] Stream started - received first chunk
[DEBUG] executePreToolHooks called for tool: Write
[DEBUG] Getting matching hook commands for PreToolUse with query: Write
[DEBUG] Found 3 hook matchers in settings
[DEBUG] Matched 3 unique hooks for query "Write" (3 before deduplication)
[DEBUG] Writing to temp file: /root/workdir/index.html.tmp.38.1763645109879
[DEBUG] Temp file written successfully, size: 54525 bytes
[DEBUG] Renaming /root/workdir/index.html.tmp.38.1763645109879 to /root/workdir/index.html
[DEBUG] File /root/workdir/index.html written atomically
[DEBUG] Getting matching hook commands for PostToolUse with query: Write
[DEBUG] Found 2 hook matchers in settings
[DEBUG] Matched 1 unique hooks for query "Write" (1 before deduplication)
[DEBUG] Hooks: getAsyncHookResponseAttachments called
[DEBUG] Hooks: checkForNewResponses called
[DEBUG] Hooks: Found 0 total hooks in registry
[DEBUG] Hooks: checkForNewResponses returning 0 responses
[DEBUG] Slash commands included in SlashCommand tool:
[DEBUG] Stream started - received first chunk
[DEBUG] Getting matching hook commands for Stop with query: undefined
[DEBUG] Found 0 hook matchers in settings
[DEBUG] Matched 0 unique hooks for query "no match query" (0 before deduplication)
[DEBUG] Getting matching hook commands for SessionEnd with query: undefined
[DEBUG] Found 0 hook matchers in settings
[DEBUG] Matched 0 unique hooks for query "no match query" (0 before deduplication)
[DEBUG] Cleaned up session snapshot: /root/.claude/shell-snapshots/snapshot-bash-1763644926169-y8382e.sh
[DEBUG] Getting matching hook commands for SessionEnd with query: undefined
[DEBUG] Found 0 hook matchers in settings
[DEBUG] Matched 0 unique hooks for query "no match query" (0 before deduplication)
[DEBUG] Hooks: getAsyncHookResponseAttachments called
[DEBUG] Hooks: checkForNewResponses called
[DEBUG] Hooks: Found 0 total hooks in registry
[DEBUG] Hooks: checkForNewResponses returning 0 responses
[DEBUG] Getting matching hook commands for UserPromptSubmit with query: undefined
[DEBUG] Found 0 hook matchers in settings
[DEBUG] Matched 0 unique hooks for query "no match query" (0 before deduplication)
[DEBUG] Slash commands included in SlashCommand tool:
[DEBUG] Stream started - received first chunk
[DEBUG] Getting matching hook commands for SubagentStop with query: undefined
[DEBUG] Found 0 hook matchers in settings
[DEBUG] Matched 0 unique hooks for query "no match query" (0 before deduplication)
[DEBUG] Stream started - received first chunk
[DEBUG] executePreToolHooks called for tool: Write
[DEBUG] Getting matching hook commands for PreToolUse with query: Write
[DEBUG] Found 3 hook matchers in settings
[DEBUG] Matched 3 unique hooks for query "Write" (3 before deduplication)
[DEBUG] Writing to temp file: /root/workdir/index.html.tmp.38.1763645447974
[DEBUG] Preserving file permissions: 100644
[DEBUG] Temp file written successfully, size: 76544 bytes
[DEBUG] Applied original permissions to temp file
[DEBUG] Renaming /root/workdir/index.html.tmp.38.1763645447974 to /root/workdir/index.html
[DEBUG] File /root/workdir/index.html written atomically
[DEBUG] Getting matching hook commands for PostToolUse with query: Write
[DEBUG] Found 2 hook matchers in settings
[DEBUG] Matched 1 unique hooks for query "Write" (1 before deduplication)
[DEBUG] Hooks: getAsyncHookResponseAttachments called
[DEBUG] Hooks: checkForNewResponses called
[DEBUG] Hooks: Found 0 total hooks in registry
[DEBUG] Hooks: checkForNewResponses returning 0 responses
[DEBUG] Slash commands included in SlashCommand tool:
[DEBUG] Stream started - received first chunk
[ERROR] Error streaming, falling back to non-streaming mode: terminated
[ERROR] Error in non-streaming fallback: 400 {"type":"error","error":{"type":"invalid_request_error","message":"Your credit balance is too low."}}
[DEBUG] Getting matching hook commands for Stop with query: undefined
[DEBUG] Found 0 hook matchers in settings
[DEBUG] Matched 0 unique hooks for query "no match query" (0 before deduplication)
[DEBUG] Getting matching hook commands for SessionEnd with query: undefined
[DEBUG] Found 0 hook matchers in settings
[DEBUG] Matched 0 unique hooks for query "no match query" (0 before deduplication)
[DEBUG] Cleaned up session snapshot: /root/.claude/shell-snapshots/snapshot-bash-1763645227338-80uw7o.sh
[DEBUG] Getting matching hook commands for SessionEnd with query: undefined
[DEBUG] Found 0 hook matchers in settings
[DEBUG] Matched 0 unique hooks for query "no match query" (0 before deduplication)
